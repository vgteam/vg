<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>vg: vg::StreamSorter&lt; Message &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">vg
   </div>
   <div id="projectbrief">tools for working with variation graphs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacevg.html">vg</a></li><li class="navelem"><a class="el" href="classvg_1_1StreamSorter.html">StreamSorter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classvg_1_1StreamSorter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">vg::StreamSorter&lt; Message &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;stream_sorter.hpp&gt;</code></p>
<div class="dynheader">
Inheritance diagram for vg::StreamSorter&lt; Message &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classvg_1_1StreamSorter.png" usemap="#vg::StreamSorter_3C_20Message_20_3E_map" alt=""/>
  <map id="vg::StreamSorter_3C_20Message_20_3E_map" name="vg::StreamSorter_3C_20Message_20_3E_map">
<area href="classvg_1_1Progressive.html" alt="vg::Progressive" shape="rect" coords="0,0,181,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1a4cb8aac1bb3f9bd9c01456b8cc046b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">Order</a> { <a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046ba4e42a788d54e696711a23e780451582b">Order::BY_GRAPH_POSITION</a>, 
<a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046ba170e02e86972c2be8559884cc3c12254">Order::RANDOM</a>
 }</td></tr>
<tr class="memdesc:a1a4cb8aac1bb3f9bd9c01456b8cc046b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a sort order that reads can be sorted in.  <a href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">More...</a><br /></td></tr>
<tr class="separator:a1a4cb8aac1bb3f9bd9c01456b8cc046b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9ef0b8a33f5011eaf655b9420d86b0f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a9ef0b8a33f5011eaf655b9420d86b0f5">StreamSorter</a> (<a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">Order</a> <a class="el" href="classvg_1_1StreamSorter.html#a03c4547e213a4be6f8f9164cf599b3c3">order</a>=<a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046ba4e42a788d54e696711a23e780451582b">Order::BY_GRAPH_POSITION</a>, bool <a class="el" href="classvg_1_1Progressive.html#a6653625f496832c4cb8711185d5e04cb">show_progress</a>=false)</td></tr>
<tr class="separator:a9ef0b8a33f5011eaf655b9420d86b0f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ef7c0c822f58db91184e6b069c3ce59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a3ef7c0c822f58db91184e6b069c3ce59">stream_sort</a> (istream &amp;stream_in, ostream &amp;stream_out, <a class="el" href="classvg_1_1StreamIndex.html">StreamIndex</a>&lt; Message &gt; *index_to=nullptr)</td></tr>
<tr class="separator:a3ef7c0c822f58db91184e6b069c3ce59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab01d2165ebd3f76b7c036c5428f4b2bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#ab01d2165ebd3f76b7c036c5428f4b2bc">easy_sort</a> (istream &amp;stream_in, ostream &amp;stream_out, <a class="el" href="classvg_1_1StreamIndex.html">StreamIndex</a>&lt; Message &gt; *index_to=nullptr)</td></tr>
<tr class="separator:ab01d2165ebd3f76b7c036c5428f4b2bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8372ac35036ca7723bfc90a686115166"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a8372ac35036ca7723bfc90a686115166">sort</a> (vector&lt; Message &gt; &amp;msgs) const</td></tr>
<tr class="memdesc:a8372ac35036ca7723bfc90a686115166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort a vector of messages, in place.  <a href="classvg_1_1StreamSorter.html#a8372ac35036ca7723bfc90a686115166">More...</a><br /></td></tr>
<tr class="separator:a8372ac35036ca7723bfc90a686115166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ebd8489bcf1ea8c3155c1aa202ab2e2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a4ebd8489bcf1ea8c3155c1aa202ab2e2">less_than</a> (const Message &amp;a, const Message &amp;b) const</td></tr>
<tr class="memdesc:a4ebd8489bcf1ea8c3155c1aa202ab2e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if out of Messages a and b, a must come before b, and false otherwise.  <a href="classvg_1_1StreamSorter.html#a4ebd8489bcf1ea8c3155c1aa202ab2e2">More...</a><br /></td></tr>
<tr class="separator:a4ebd8489bcf1ea8c3155c1aa202ab2e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4240a47a167f22d3815de6fe976420b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvg_1_1Position.html">Position</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a4240a47a167f22d3815de6fe976420b5">get_min_position</a> (const Message &amp;msg) const</td></tr>
<tr class="separator:a4240a47a167f22d3815de6fe976420b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243723f25750130a537550ac111be9ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a243723f25750130a537550ac111be9ed">less_than</a> (const <a class="el" href="structvg_1_1Position.html">Position</a> &amp;a, const <a class="el" href="structvg_1_1Position.html">Position</a> &amp;b) const</td></tr>
<tr class="separator:a243723f25750130a537550ac111be9ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classvg_1_1Progressive"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classvg_1_1Progressive')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classvg_1_1Progressive.html">vg::Progressive</a></td></tr>
<tr class="memitem:a4eb5050eb36ed519cbfa398748ef183b inherit pub_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#a4eb5050eb36ed519cbfa398748ef183b">preload_progress</a> (const string &amp;message)</td></tr>
<tr class="separator:a4eb5050eb36ed519cbfa398748ef183b inherit pub_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cce3f715516ed2bbb4ce3a312b01e02 inherit pub_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#a1cce3f715516ed2bbb4ce3a312b01e02">create_progress</a> (const string &amp;message, long count)</td></tr>
<tr class="separator:a1cce3f715516ed2bbb4ce3a312b01e02 inherit pub_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d4e92a36a277be5bc0cee5d01f5ca1 inherit pub_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#a75d4e92a36a277be5bc0cee5d01f5ca1">create_progress</a> (long count)</td></tr>
<tr class="separator:a75d4e92a36a277be5bc0cee5d01f5ca1 inherit pub_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d64e6aa69bc094c163f4827602a302c inherit pub_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#a0d64e6aa69bc094c163f4827602a302c">update_progress</a> (long i)</td></tr>
<tr class="separator:a0d64e6aa69bc094c163f4827602a302c inherit pub_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1de11917caf25974a02e2f5c3946280 inherit pub_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#ab1de11917caf25974a02e2f5c3946280">increment_progress</a> ()</td></tr>
<tr class="separator:ab1de11917caf25974a02e2f5c3946280 inherit pub_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab8c6ae92870077bb59f86a15c8d18f inherit pub_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#aaab8c6ae92870077bb59f86a15c8d18f">destroy_progress</a> (void)</td></tr>
<tr class="separator:aaab8c6ae92870077bb59f86a15c8d18f inherit pub_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ac3d9f35b14e13610b61a55b57d2f6332"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#ac3d9f35b14e13610b61a55b57d2f6332">cursor_t</a> = <a class="el" href="classvg_1_1io_1_1ProtobufIterator.html">vg::io::ProtobufIterator</a>&lt; Message &gt;</td></tr>
<tr class="separator:ac3d9f35b14e13610b61a55b57d2f6332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6454b204b096a5736ce98310aada955d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a6454b204b096a5736ce98310aada955d">emitter_t</a> = <a class="el" href="classvg_1_1io_1_1ProtobufEmitter.html">vg::io::ProtobufEmitter</a>&lt; Message &gt;</td></tr>
<tr class="separator:a6454b204b096a5736ce98310aada955d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a112c5a39918bb37f4aa3bf1413d31b37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a112c5a39918bb37f4aa3bf1413d31b37">open_all</a> (const vector&lt; string &gt; &amp;filenames, list&lt; ifstream &gt; &amp;streams, list&lt; <a class="el" href="classvg_1_1StreamSorter.html#ac3d9f35b14e13610b61a55b57d2f6332">cursor_t</a> &gt; &amp;cursors)</td></tr>
<tr class="separator:a112c5a39918bb37f4aa3bf1413d31b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c19cdfb158ff9771e471fbbc2b4ac74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a1c19cdfb158ff9771e471fbbc2b4ac74">streaming_merge</a> (list&lt; <a class="el" href="classvg_1_1StreamSorter.html#ac3d9f35b14e13610b61a55b57d2f6332">cursor_t</a> &gt; &amp;cursors, <a class="el" href="classvg_1_1StreamSorter.html#a6454b204b096a5736ce98310aada955d">emitter_t</a> &amp;emitter, size_t expected_messages=0)</td></tr>
<tr class="separator:a1c19cdfb158ff9771e471fbbc2b4ac74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77590f7da1d1418fc00e7bdaec2a76e5"><td class="memItemLeft" align="right" valign="top">vector&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a77590f7da1d1418fc00e7bdaec2a76e5">streaming_merge</a> (const vector&lt; string &gt; &amp;temp_names_in, unordered_map&lt; string, size_t &gt; *messages_per_file=nullptr)</td></tr>
<tr class="separator:a77590f7da1d1418fc00e7bdaec2a76e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a03c4547e213a4be6f8f9164cf599b3c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">Order</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a03c4547e213a4be6f8f9164cf599b3c3">order</a></td></tr>
<tr class="memdesc:a03c4547e213a4be6f8f9164cf599b3c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">What orser are we sorting in.  <a href="classvg_1_1StreamSorter.html#a03c4547e213a4be6f8f9164cf599b3c3">More...</a><br /></td></tr>
<tr class="separator:a03c4547e213a4be6f8f9164cf599b3c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8875748639a885dfacf261956a9b3ee4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a8875748639a885dfacf261956a9b3ee4">seed</a></td></tr>
<tr class="memdesc:a8875748639a885dfacf261956a9b3ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">For random order, what is our seed/hash salt?  <a href="classvg_1_1StreamSorter.html#a8875748639a885dfacf261956a9b3ee4">More...</a><br /></td></tr>
<tr class="separator:a8875748639a885dfacf261956a9b3ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a192491eeef2fa2c99522f2ad23f12035"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a192491eeef2fa2c99522f2ad23f12035">max_buf_size</a> = (512 * 1024 * 1024)</td></tr>
<tr class="separator:a192491eeef2fa2c99522f2ad23f12035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673ce446e1ba8b9917f9475b9003364d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1StreamSorter.html#a673ce446e1ba8b9917f9475b9003364d">max_fan_in</a></td></tr>
<tr class="separator:a673ce446e1ba8b9917f9475b9003364d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classvg_1_1Progressive"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classvg_1_1Progressive')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classvg_1_1Progressive.html">vg::Progressive</a></td></tr>
<tr class="memitem:ab44ff020fc951b95dfcd1252c015a020 inherit pub_static_methods_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#ab44ff020fc951b95dfcd1252c015a020">with_progress</a> (bool <a class="el" href="classvg_1_1Progressive.html#a6653625f496832c4cb8711185d5e04cb">show_progress</a>, const std::string &amp;task, const std::function&lt; void(const std::function&lt; void(size_t, size_t)&gt; &amp;<a class="el" href="classvg_1_1Progressive.html#af78e64e28b252828a0ba86439125fea4">progress</a>)&gt; &amp;callback)</td></tr>
<tr class="separator:ab44ff020fc951b95dfcd1252c015a020 inherit pub_static_methods_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classvg_1_1Progressive"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classvg_1_1Progressive')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classvg_1_1Progressive.html">vg::Progressive</a></td></tr>
<tr class="memitem:a6653625f496832c4cb8711185d5e04cb inherit pub_attribs_classvg_1_1Progressive"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvg_1_1Progressive.html#a6653625f496832c4cb8711185d5e04cb">show_progress</a> = false</td></tr>
<tr class="separator:a6653625f496832c4cb8711185d5e04cb inherit pub_attribs_classvg_1_1Progressive"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Message&gt;<br />
class vg::StreamSorter&lt; Message &gt;</h3>

<p>We define a PositionScanner that scans any <a class="el" href="classvg_1_1VG.html">VG</a> Protobuf message that has Positions or node IDs in it and emits the Positions as is and the node IDs wrapped in Positions. This lets us use one sorting implementation on Positions even with things like Graphs where non-Position node IDs are important. Provides the ability to sort a stream of Protobuf Messages, either "dumbly" (in memory), or streaming into temporary files. For Alignments, paired Alignments are not necessarily going to end up next to each other, so if sorting by position make sure to set the position cross-references first if you want to be able to find them. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ac3d9f35b14e13610b61a55b57d2f6332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3d9f35b14e13610b61a55b57d2f6332">&#9670;&nbsp;</a></span>cursor_t</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::<a class="el" href="classvg_1_1StreamSorter.html#ac3d9f35b14e13610b61a55b57d2f6332">cursor_t</a> =  <a class="el" href="classvg_1_1io_1_1ProtobufIterator.html">vg::io::ProtobufIterator</a>&lt;Message&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6454b204b096a5736ce98310aada955d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6454b204b096a5736ce98310aada955d">&#9670;&nbsp;</a></span>emitter_t</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::<a class="el" href="classvg_1_1StreamSorter.html#a6454b204b096a5736ce98310aada955d">emitter_t</a> =  <a class="el" href="classvg_1_1io_1_1ProtobufEmitter.html">vg::io::ProtobufEmitter</a>&lt;Message&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a1a4cb8aac1bb3f9bd9c01456b8cc046b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a4cb8aac1bb3f9bd9c01456b8cc046b">&#9670;&nbsp;</a></span>Order</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">vg::StreamSorter::Order</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Represents a sort order that reads can be sorted in. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a1a4cb8aac1bb3f9bd9c01456b8cc046ba4e42a788d54e696711a23e780451582b"></a>BY_GRAPH_POSITION&#160;</td><td class="fielddoc"><p>Sort reads by graph position. Can be indexed. </p>
</td></tr>
<tr><td class="fieldname"><a id="a1a4cb8aac1bb3f9bd9c01456b8cc046ba170e02e86972c2be8559884cc3c12254"></a>RANDOM&#160;</td><td class="fielddoc"><p>Sort reads in a random order. Cannot be indexed. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9ef0b8a33f5011eaf655b9420d86b0f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef0b8a33f5011eaf655b9420d86b0f5">&#9670;&nbsp;</a></span>StreamSorter()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::<a class="el" href="classvg_1_1StreamSorter.html">StreamSorter</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">Order</a>&#160;</td>
          <td class="paramname"><em>order</em> = <code><a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046ba4e42a788d54e696711a23e780451582b">Order::BY_GRAPH_POSITION</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>show_progress</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a stream sorter, showing sort progress on standard error if show_progress is true. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab01d2165ebd3f76b7c036c5428f4b2bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab01d2165ebd3f76b7c036c5428f4b2bc">&#9670;&nbsp;</a></span>easy_sort()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::easy_sort </td>
          <td>(</td>
          <td class="paramtype">istream &amp;&#160;</td>
          <td class="paramname"><em>stream_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>stream_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvg_1_1StreamIndex.html">StreamIndex</a>&lt; Message &gt; *&#160;</td>
          <td class="paramname"><em>index_to</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sort a stream of VPKG-format Protobuf data, loading it all into memory and doing a single giant sort operation. Optionally index the sorted file into the given index. </p>

</div>
</div>
<a id="a4240a47a167f22d3815de6fe976420b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4240a47a167f22d3815de6fe976420b5">&#9670;&nbsp;</a></span>get_min_position()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvg_1_1Position.html">Position</a> <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::get_min_position </td>
          <td>(</td>
          <td class="paramtype">const Message &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine the minumum <a class="el" href="structvg_1_1Position.html">Position</a> visited by an Message. The minumum <a class="el" href="structvg_1_1Position.html">Position</a> is the lowest node ID visited by the message, with the lowest offset visited on that node ID as the offset, and the orientation set to false if the forward strand is visited, and true if only the reverse strand is visited. </p>

</div>
</div>
<a id="a4ebd8489bcf1ea8c3155c1aa202ab2e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebd8489bcf1ea8c3155c1aa202ab2e2">&#9670;&nbsp;</a></span>less_than() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::less_than </td>
          <td>(</td>
          <td class="paramtype">const Message &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Message &amp;&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if out of Messages a and b, a must come before b, and false otherwise. </p>

</div>
</div>
<a id="a243723f25750130a537550ac111be9ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a243723f25750130a537550ac111be9ed">&#9670;&nbsp;</a></span>less_than() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::less_than </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvg_1_1Position.html">Position</a> &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvg_1_1Position.html">Position</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return True if position A is less than position B in our sort, and false otherwise. <a class="el" href="structvg_1_1Position.html">Position</a> order is defined first by node ID, then by strand (forward first), and then by offset within the strand. We can't sort by actual base on the forward strand, because we need to be able to sort without knowing the graph's node lengths. </p>

</div>
</div>
<a id="a112c5a39918bb37f4aa3bf1413d31b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112c5a39918bb37f4aa3bf1413d31b37">&#9670;&nbsp;</a></span>open_all()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::open_all </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>filenames</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&lt; ifstream &gt; &amp;&#160;</td>
          <td class="paramname"><em>streams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&lt; <a class="el" href="classvg_1_1StreamSorter.html#ac3d9f35b14e13610b61a55b57d2f6332">cursor_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cursors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Open all the given input files, keeping the streams and cursors in the given lists. We use lists because none of these should be allowed to move after creation. </p>

</div>
</div>
<a id="a8372ac35036ca7723bfc90a686115166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8372ac35036ca7723bfc90a686115166">&#9670;&nbsp;</a></span>sort()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::sort </td>
          <td>(</td>
          <td class="paramtype">vector&lt; Message &gt; &amp;&#160;</td>
          <td class="paramname"><em>msgs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sort a vector of messages, in place. </p>

</div>
</div>
<a id="a3ef7c0c822f58db91184e6b069c3ce59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ef7c0c822f58db91184e6b069c3ce59">&#9670;&nbsp;</a></span>stream_sort()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::stream_sort </td>
          <td>(</td>
          <td class="paramtype">istream &amp;&#160;</td>
          <td class="paramname"><em>stream_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>stream_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvg_1_1StreamIndex.html">StreamIndex</a>&lt; Message &gt; *&#160;</td>
          <td class="paramname"><em>index_to</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sort a stream of VPKG-format Protobuf data, using temporary files, limiting the number of simultaneously open input files and the size of in-memory data. Optionally index the sorted file into the given index. </p>

</div>
</div>
<a id="a77590f7da1d1418fc00e7bdaec2a76e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77590f7da1d1418fc00e7bdaec2a76e5">&#9670;&nbsp;</a></span>streaming_merge() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; string &gt; <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::streaming_merge </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>temp_names_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unordered_map&lt; string, size_t &gt; *&#160;</td>
          <td class="paramname"><em>messages_per_file</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Merge all the given temp input files into one or more temp output files, opening no more than max_fan_in input files at a time. The input files, which must be from <a class="el" href="namespacevg_1_1temp__file.html#a84ef71efd10b4010f206ae8510545f40" title="Create a temporary file starting with the given base name.">temp_file::create()</a>, will be deleted.</p>
<p>If messages_per_file is specified, it will be used to show progress bars, and will be updated for newly-created files. </p>

</div>
</div>
<a id="a1c19cdfb158ff9771e471fbbc2b4ac74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c19cdfb158ff9771e471fbbc2b4ac74">&#9670;&nbsp;</a></span>streaming_merge() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::streaming_merge </td>
          <td>(</td>
          <td class="paramtype">list&lt; <a class="el" href="classvg_1_1StreamSorter.html#ac3d9f35b14e13610b61a55b57d2f6332">cursor_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cursors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvg_1_1StreamSorter.html#a6454b204b096a5736ce98310aada955d">emitter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>emitter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>expected_messages</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Merge all the messages from the given list of cursors into the given emitter. The total expected number of messages can be passed for progress bar purposes. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a192491eeef2fa2c99522f2ad23f12035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a192491eeef2fa2c99522f2ad23f12035">&#9670;&nbsp;</a></span>max_buf_size</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::max_buf_size = (512 * 1024 * 1024)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>What's the maximum size of messages in serialized, uncompressed bytes to load into memory for a single temp file chunk, during the streaming sort? For reference, a whole-genome GAM file is about 500 GB of uncompressed data </p>

</div>
</div>
<a id="a673ce446e1ba8b9917f9475b9003364d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673ce446e1ba8b9917f9475b9003364d">&#9670;&nbsp;</a></span>max_fan_in</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::max_fan_in</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>What's the max fan-in when combining temp files, during the streaming sort? This will be computed based on the max file descriptor limit from the OS. </p>

</div>
</div>
<a id="a03c4547e213a4be6f8f9164cf599b3c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03c4547e213a4be6f8f9164cf599b3c3">&#9670;&nbsp;</a></span>order</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvg_1_1StreamSorter.html#a1a4cb8aac1bb3f9bd9c01456b8cc046b">Order</a> <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::order</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>What orser are we sorting in. </p>

</div>
</div>
<a id="a8875748639a885dfacf261956a9b3ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8875748639a885dfacf261956a9b3ee4">&#9670;&nbsp;</a></span>seed</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Message &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classvg_1_1StreamSorter.html">vg::StreamSorter</a>&lt; Message &gt;::seed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For random order, what is our seed/hash salt? </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="stream__sorter_8hpp.html">stream_sorter.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
